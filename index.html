<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T10 Resource Calculator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1300px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            backdrop-filter: blur(10px);
            position: relative;
        }
        
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        
        .language-btn {
            background: linear-gradient(to bottom, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .language-btn:hover {
            background: linear-gradient(to bottom, #2980b9, #2573a7);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
            padding-right: 100px;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .instructions {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 0 8px 8px 0;
        }
        
        .technology-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            font-size: 0.95em;
        }
        
        .technology-table th {
            background: linear-gradient(to bottom, #3498db, #2980b9);
            color: white;
            padding: 15px 10px;
            text-align: left;
            border: none;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .technology-table td {
            padding: 12px 10px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        .technology-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .technology-table tr:hover {
            background-color: #f0f7ff;
        }
        
        .level-select {
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 80px;
            background-color: white;
            font-size: 0.95em;
            transition: all 0.3s;
        }
        
        .level-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }
        
        .totals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .total-card {
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }
        
        .total-card:hover {
            transform: translateY(-5px);
        }
        
        .total-card.valor {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }
        
        .total-card.iron {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .total-card.bread {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .total-card.gold {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
        }
        
        .total-label {
            font-size: 1em;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .total-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .resource-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 6px;
            vertical-align: middle;
            width: 1.4em;
            height: 1.4em;
        }
        
        .resource-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .tech-icon {
            margin-right: 10px;
            width: 1.6em;
            height: 1.6em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
        }
        
        .tech-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .tech-name {
            display: inline-block;
            vertical-align: middle;
        }
        
        .resource-header {
            display: flex;
            align-items: center;
            white-space: nowrap;
        }
        
        .auto-reset-note {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9em;
            color: #7f8c8d;
            font-style: italic;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .buildings-section {
            background: linear-gradient(120deg, #e0eafc 0%, #cfdef3 100%);
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(44, 62, 80, 0.08);
            padding: 20px 18px 10px 18px;
            margin-bottom: 30px;
            transition: box-shadow 0.3s;
        }

        .buildings-section:hover {
            box-shadow: 0 4px 24px rgba(44, 62, 80, 0.15);
        }

        .buildings-section table.technology-table {
            background: transparent;
            box-shadow: none;
            margin-bottom: 0;
        }

        .buildings-section th {
            background: linear-gradient(to right, #3498db, #6dd5fa);
            color: #fff;
            font-weight: 600;
            border-radius: 6px 6px 0 0;
            border: none;
            padding: 12px 8px;
        }

        .buildings-section td {
            background: rgba(255,255,255,0.85);
            border-bottom: 1px solid #e3e3e3;
            padding: 10px 8px;
            vertical-align: middle;
            font-size: 1em;
        }

        .buildings-section tr:last-child td {
            border-bottom: none;
        }

        .buildings-section label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .building-checkbox {
            accent-color: #3498db;
            width: 18px;
            height: 18px;
            margin-right: 6px;
            cursor: pointer;
            transition: box-shadow 0.2s;
        }

        .buildings-section tr:hover td {
            background: #f0f7ff;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .language-switcher {
                position: static;
                text-align: right;
                margin-bottom: 15px;
            }
            
            header {
                padding-right: 0;
            }
            
            .technology-table {
                display: block;
                overflow-x: auto;
                font-size: 0.9em;
            }
            
            .technology-table th, 
            .technology-table td {
                padding: 10px 8px;
            }
            
            .totals {
                grid-template-columns: 1fr;
            }
            
            .tech-icon {
                margin-right: 8px;
                width: 1.4em;
                height: 1.4em;
            }
            
            .resource-icon {
                margin-right: 4px;
                width: 1.2em;
                height: 1.2em;
            }
            
            .level-select {
                width: 70px;
                padding: 6px 8px;
                font-size: 0.9em;
            }
        }
        
        @media (max-width: 480px) {
            .technology-table {
                font-size: 0.85em;
            }
            
            .technology-table th, 
            .technology-table td {
                padding: 8px 6px;
            }
            
            .tech-icon {
                margin-right: 6px;
                width: 1.3em;
                height: 1.3em;
            }
            
            .resource-icon {
                margin-right: 3px;
                width: 1.1em;
                height: 1.1em;
            }
            
            .level-select {
                width: 60px;
                padding: 5px 6px;
                font-size: 0.85em;
            }
            
            .total-card {
                padding: 15px;
            }
            
            .total-value {
                font-size: 1.7em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="language-switcher">
            <button class="language-btn" id="language-btn">
                <span id="language-text">Português</span>
            </button>
        </div>
        
        <header>
            <h1 id="page-title">T10 Resource Calculator</h1>
            <p class="subtitle" id="page-subtitle">Created by #1551 [P2P]WaaarZ</p>
        </header>
        
        <div class="instructions" id="instructions">
            <p><strong id="instructions-title">How to use:</strong> <span id="instructions-text">For each technology, select the current level and the desired level. The calculator will automatically show the resources needed to upgrade.</span></p>
        </div>
        
        <table class="technology-table">
            <thead>
                <tr>
                    <th id="tech-name-header">Technology</th>
                    <th id="current-level-header">Current Level</th>
                    <th id="target-level-header">Target Level</th>
                    <th>
                        <div class="resource-header">
                            <span class="resource-icon">
                                <img src="main/valor.png" alt="Valor Medals">
                            </span>
                            <span id="valor-header">Valor Medals</span>
                        </div>
                    </th>
                    <th>
                        <div class="resource-header">
                            <span class="resource-icon">
                                <img src="main/iron.png" alt="Iron">
                            </span>
                            <span id="iron-header">Iron</span> (m)
                        </div>
                    </th>
                    <th>
                        <div class="resource-header">
                            <span class="resource-icon">
                                <img src="main/bread.png" alt="Bread">
                            </span>
                            <span id="bread-header">Bread</span> (m)
                        </div>
                    </th>
                    <th>
                        <div class="resource-header">
                            <span class="resource-icon">
                                <img src="main/gold.png" alt="Gold">
                            </span>
                            <span id="gold-header">Gold</span> (m)
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody id="technologies-body">
                <!-- Technologies will be populated via JavaScript -->
            </tbody>
        </table>
        
        <div class="buildings-section" style="margin-bottom: 30px;">
            <div style="font-weight: bold; margin-bottom: 10px;">
                <span id="buildings-title">Buildings (optional):</span>
            </div>
            <table class="technology-table" style="margin-bottom: 0;">
                <thead>
                    <tr>
                        <th></th>
                        <th id="buildings-iron-header">Iron (m)</th>
                        <th id="buildings-bread-header">Bread (m)</th>
                        <th id="buildings-gold-header">Gold (m)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <label>
                                <input type="checkbox" class="building-checkbox" data-index="0">
                                <span class="tech-icon"><img src="main/hq.png" alt="HQ"></span>
                                <span id="hq-label">HQ lvl.30</span>
                            </label>
                        </td>
                        <td id="building-iron-0">1,300</td>
                        <td id="building-bread-0">1,300</td>
                        <td id="building-gold-0">425</td>
                    </tr>
                    <tr>
                        <td>
                            <label>
                                <input type="checkbox" class="building-checkbox" data-index="1">
                                <span class="tech-icon"><img src="main/techcentre.png" alt="Tech Centre"></span>
                                <span id="techcentre-label">Tech centre lvl.30</span>
                            </label>
                        </td>
                        <td id="building-iron-1">1,200</td>
                        <td id="building-bread-1">1,200</td>
                        <td id="building-gold-1">375</td>
                    </tr>
                    <tr>
                        <td>
                            <label>
                                <input type="checkbox" class="building-checkbox" data-index="2">
                                <span class="tech-icon"><img src="main/barracks.png" alt="Barracks"></span>
                                <span id="barracks-label">Barracks lvl.30</span>
                            </label>
                        </td>
                        <td id="building-iron-2">666</td>
                        <td id="building-bread-2">666</td>
                        <td id="building-gold-2">270</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="totals">
            <div class="total-card valor">
                <div class="total-label" id="total-valor-label">Valor Medals Required</div>
                <div class="total-value" id="total-valor">0</div>
            </div>
            <div class="total-card iron">
                <div class="total-label" id="total-iron-label">Total Iron Required</div>
                <div class="total-value" id="total-iron">0m</div>
            </div>
            <div class="total-card bread">
                <div class="total-label" id="total-bread-label">Total Bread Required</div>
                <div class="total-value" id="total-bread">0m</div>
            </div>
            <div class="total-card gold">
                <div class="total-label" id="total-gold-label">Total Gold Required</div>
                <div class="total-value" id="total-gold">0m</div>
            </div>
        </div>
        
        <div class="auto-reset-note" id="auto-reset-note">
            Please note: the values are only references, the actual values may vary depending on your buffs. The calculations are updated automatically. To reset, select current level 0 and maximum target level in each technology.
        </div>

        <div class="footer">
            <p>T10 Resource Calculator v1.0.1 | For game optimization purposes only</p>
        </div>
    </div>

    <script>
        // Translation data
        const translations = {
            'en': {
                pageTitle: 'T10 Resource Calculator',
                pageSubtitle: 'Created by #1551 [P2P]WaaarZ',
                instructionsTitle: 'How to use:',
                instructionsText: 'For each technology, select the current level and the desired level. The calculator will automatically show the resources needed to upgrade.',
                techNameHeader: 'Technology',
                currentLevelHeader: 'Current Level',
                targetLevelHeader: 'Target Level',
                valorHeader: 'Valor Medals',
                ironHeader: 'Iron',
                breadHeader: 'Bread',
                goldHeader: 'Gold',
                totalValorLabel: 'Valor Medals Required',
                totalIronLabel: 'Total Iron Required',
                totalBreadLabel: 'Total Bread Required',
                totalGoldLabel: 'Total Gold Required',
                languageText: 'Português',
                autoResetNote: 'Please note: the values are only references, the actual values may vary depending on your buffs. The calculations are updated automatically. To reset, select current level 0 and maximum target level in each technology.',
                advancedProtection: 'Advanced Protection',
                hpIncrease: 'HP Boost III',
                attackIncrease: 'Attack Boost III',
                defenseIncrease: 'Defense Boost III',
                unitX: 'Unit X'
            },
            'pt-BR': {
                pageTitle: 'Calculadora de Recursos para T10',
                pageSubtitle: 'Criado por #1551 [P2P]WaaarZ',
                instructionsTitle: 'Como usar:',
                instructionsText: 'Para cada tecnologia, selecione o nível atual e o nível desejado. A calculadora mostrará automaticamente os recursos necessários para evoluir.',
                techNameHeader: 'Tecnologia',
                currentLevelHeader: 'Nível Atual',
                targetLevelHeader: 'Nível Meta',
                valorHeader: 'Medalhas Valor',
                ironHeader: 'Ferro',
                breadHeader: 'Pão',
                goldHeader: 'Ouro',
                totalValorLabel: 'Medalhas Valor Necessárias',
                totalIronLabel: 'Ferro Total Necessário',
                totalBreadLabel: 'Pão Total Necessário',
                totalGoldLabel: 'Ouro Total Necessário',
                languageText: 'English',
                autoResetNote: 'Atenção: os valores são apenas referências, os valores reais podem variar de acordo com os seus buffs. Os cálculos são atualizados automaticamente. Para redefinir, selecione nível atual 0 e nível meta máximo em cada tecnologia.',
                advancedProtection: 'Proteção Avançada',
                hpIncrease: 'Aumento de HP III',
                attackIncrease: 'Aumento de Ataque III',
                defenseIncrease: 'Aumento de Defesa III',
                unitX: 'Unidade X'
            }
        };

        // Technology data with Valor Medals
        const technologiesData = [
            {
                name: {
                    'en': 'Advanced Protection',
                    'pt-BR': 'Proteção Avançada'
                },
                icon: "main/protection.png",
                maxLevel: 10,
                costs: [
                    { level: 1, valor: 1280, iron: 25, bread: 25, gold: 75 },
                    { level: 2, valor: 1440, iron: 31, bread: 31, gold: 93 },
                    { level: 3, valor: 1440, iron: 31, bread: 31, gold: 93 },
                    { level: 4, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 5, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 6, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 7, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 8, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 9, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 10, valor: 2200, iron: 133, bread: 133, gold: 400 }
                ]
            },
            {
                name: {
                    'en': 'HP Boost III',
                    'pt-BR': 'Aumento de HP III'
                },
                icon: "main/hp.png",
                maxLevel: 10,
                costs: [
                    { level: 1, valor: 1440, iron: 31, bread: 31, gold: 91 },
                    { level: 2, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 3, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 4, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 5, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 6, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 7, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 8, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 9, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 10, valor: 2400, iron: 175, bread: 175, gold: 522 }
                ]
            },
            {
                name: {
                    'en': 'Attack Boost III',
                    'pt-BR': 'Aumento de Ataque III'
                },
                icon: "main/attack.png",
                maxLevel: 10,
                costs: [
                    { level: 1, valor: 1440, iron: 31, bread: 31, gold: 91 },
                    { level: 2, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 3, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 4, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 5, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 6, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 7, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 8, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 9, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 10, valor: 2400, iron: 175, bread: 175, gold: 522 }
                ]
            },
            {
                name: {
                    'en': 'Defense Boost III',
                    'pt-BR': 'Aumento de Defesa III'
                },
                icon: "main/defense.png",
                maxLevel: 10,
                costs: [
                    { level: 1, valor: 1440, iron: 31, bread: 31, gold: 91 },
                    { level: 2, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 3, valor: 1600, iron: 53, bread: 53, gold: 158 },
                    { level: 4, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 5, valor: 1800, iron: 74, bread: 74, gold: 221 },
                    { level: 6, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 7, valor: 2000, iron: 96, bread: 96, gold: 287 },
                    { level: 8, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 9, valor: 2200, iron: 134, bread: 134, gold: 403 },
                    { level: 10, valor: 2400, iron: 175, bread: 175, gold: 522 }
                ]
            },
            {
                name: {
                    'en': 'Unit X',
                    'pt-BR': 'Unidade X'
                },
                icon: "main/unit.png",
                maxLevel: 1,
                costs: [
                    { level: 1, valor: 2400, iron: 188, bread: 188, gold: 563 }
                ]
            }
        ];

        // Current language state - default to English
        let currentLanguage = 'en';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            populateTechnologiesTable();
            updateTotals();
            
            // Add event to language button
            document.getElementById('language-btn').addEventListener('click', toggleLanguage);
        });

        // Toggle between languages
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'pt-BR' : 'en';
            updateLanguage();
        }

        // Update all texts to current language
        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update page texts
            document.getElementById('page-title').textContent = t.pageTitle;
            document.getElementById('page-subtitle').textContent = t.pageSubtitle;
            document.getElementById('instructions-title').textContent = t.instructionsTitle;
            document.getElementById('instructions-text').textContent = t.instructionsText;
            document.getElementById('tech-name-header').textContent = t.techNameHeader;
            document.getElementById('current-level-header').textContent = t.currentLevelHeader;
            document.getElementById('target-level-header').textContent = t.targetLevelHeader;
            document.getElementById('valor-header').textContent = t.valorHeader;
            document.getElementById('iron-header').textContent = t.ironHeader;
            document.getElementById('bread-header').textContent = t.breadHeader;
            document.getElementById('gold-header').textContent = t.goldHeader;
            document.getElementById('total-valor-label').textContent = t.totalValorLabel;
            document.getElementById('total-iron-label').textContent = t.totalIronLabel;
            document.getElementById('total-bread-label').textContent = t.totalBreadLabel;
            document.getElementById('total-gold-label').textContent = t.totalGoldLabel;
            document.getElementById('language-text').textContent = t.languageText;
            document.getElementById('auto-reset-note').textContent = t.autoResetNote;
            
            // Update technology names
            const techNames = document.querySelectorAll('.tech-name');
            technologiesData.forEach((tech, index) => {
                if (techNames[index]) {
                    techNames[index].textContent = tech.name[currentLanguage];
                }
            });
        }

        // Populate the table with technologies
        function populateTechnologiesTable() {
            const tableBody = document.getElementById('technologies-body');
            tableBody.innerHTML = '';
            
            technologiesData.forEach((tech, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div>
                            <span class="tech-icon">
                                <img src="${tech.icon}" alt="${tech.name[currentLanguage]}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjFGMUYxIi8+Cjx0ZXh0IHg9IjEyIiB5PSIxMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SWNvbjwvdGV4dD4KPC9zdmc+'">
                            </span>
                            <span class="tech-name">${tech.name[currentLanguage]}</span>
                        </div>
                    </td>
                    <td>
                        <select class="level-select" data-index="${index}" data-type="current">
                            ${generateLevelOptions(tech.maxLevel, 0)}
                        </select>
                    </td>
                    <td>
                        <select class="level-select" data-index="${index}" data-type="target">
                            ${generateLevelOptions(tech.maxLevel, tech.maxLevel)}
                        </select>
                    </td>
                    <td id="valor-${index}">-</td>
                    <td id="iron-${index}">-</td>
                    <td id="bread-${index}">-</td>
                    <td id="gold-${index}">-</td>
                `;
                tableBody.appendChild(row);
                
                // Add change events to selects
                const currentSelect = row.querySelector('select[data-type="current"]');
                const targetSelect = row.querySelector('select[data-type="target"]');
                
                currentSelect.addEventListener('change', function() {
                    const targetLevel = parseInt(targetSelect.value);
                    const currentLevel = parseInt(this.value);
                    
                    // Ensure current level is not greater than target level
                    if (currentLevel > targetLevel) {
                        targetSelect.value = currentLevel;
                    }
                    
                    updateRowTotals(index);
                    updateTotals();
                });
                
                targetSelect.addEventListener('change', function() {
                    const currentLevel = parseInt(currentSelect.value);
                    const targetLevel = parseInt(this.value);
                    
                    // Ensure target level is not less than current level
                    if (targetLevel < currentLevel) {
                        currentSelect.value = targetLevel;
                    }
                    
                    updateRowTotals(index);
                    updateTotals();
                });
                
                // Calculate initial totals for this row
                updateRowTotals(index);
            });
        }

        // Generate level options for selects
        function generateLevelOptions(maxLevel, selectedLevel) {
            let options = '';
            for (let i = 0; i <= maxLevel; i++) {
                options += `<option value="${i}" ${i === selectedLevel ? 'selected' : ''}>${i}</option>`;
            }
            return options;
        }

        // Calculate totals for a specific row
        function updateRowTotals(index) {
            const tech = technologiesData[index];
            const currentLevel = parseInt(document.querySelector(`select[data-index="${index}"][data-type="current"]`).value);
            const targetLevel = parseInt(document.querySelector(`select[data-index="${index}"][data-type="target"]`).value);
            
            let valorNeeded = 0;
            let ironNeeded = 0;
            let breadNeeded = 0;
            let goldNeeded = 0;
            
            // Sum the costs of levels between current and target (exclusive of current)
            for (let i = currentLevel + 1; i <= targetLevel; i++) {
                const levelCost = tech.costs[i-1]; // 0-based index
                valorNeeded += levelCost.valor;
                ironNeeded += levelCost.iron;
                breadNeeded += levelCost.bread;
                goldNeeded += levelCost.gold;
            }
            
            // Update the table row
            document.getElementById(`valor-${index}`).textContent = valorNeeded > 0 ? valorNeeded.toLocaleString() : '-';
            document.getElementById(`iron-${index}`).textContent = ironNeeded > 0 ? ironNeeded.toLocaleString() + 'm' : '-';
            document.getElementById(`bread-${index}`).textContent = breadNeeded > 0 ? breadNeeded.toLocaleString() + 'm' : '-';
            document.getElementById(`gold-${index}`).textContent = goldNeeded > 0 ? goldNeeded.toLocaleString() + 'm' : '-';
            
            return { valor: valorNeeded, iron: ironNeeded, bread: breadNeeded, gold: goldNeeded };
        }

        // Calculate overall totals
        function updateTotals() {
            let totalValor = 0;
            let totalIron = 0;
            let totalBread = 0;
            let totalGold = 0;
            
            technologiesData.forEach((tech, index) => {
                const rowTotals = updateRowTotals(index);
                totalValor += rowTotals.valor;
                totalIron += rowTotals.iron;
                totalBread += rowTotals.bread;
                totalGold += rowTotals.gold;
            });
            
            // Update the interface
            document.getElementById('total-valor').textContent = totalValor.toLocaleString();
            document.getElementById('total-iron').textContent = totalIron.toLocaleString() + 'm';
            document.getElementById('total-bread').textContent = totalBread.toLocaleString() + 'm';
            document.getElementById('total-gold').textContent = totalGold.toLocaleString() + 'm';
        }

        // Dados das construções
        const buildingsData = [
            {
                name: { 'en': 'HQ lvl.30', 'pt-BR': 'QG nv.30' },
                iron: 1300, bread: 1300, gold: 425
            },
            {
                name: { 'en': 'Tech centre lvl.30', 'pt-BR': 'Centro de Tecnologia nv.30' },
                iron: 1200, bread: 1200, gold: 375
            },
            {
                name: { 'en': 'Barracks lvl.30', 'pt-BR': 'Quartel nv.30' },
                iron: 666, bread: 666, gold: 270
            }
        ];

        // Atualize textos das construções ao trocar idioma
        function updateBuildingsLanguage() {
            document.getElementById('buildings-title').textContent = currentLanguage === 'en' ? 'Buildings (optional):' : 'Construções (opcional):';
            document.getElementById('buildings-iron-header').textContent = translations[currentLanguage].ironHeader + ' (m)';
            document.getElementById('buildings-bread-header').textContent = translations[currentLanguage].breadHeader + ' (m)';
            document.getElementById('buildings-gold-header').textContent = translations[currentLanguage].goldHeader + ' (m)';
            document.getElementById('hq-label').textContent = buildingsData[0].name[currentLanguage];
            document.getElementById('techcentre-label').textContent = buildingsData[1].name[currentLanguage];
            document.getElementById('barracks-label').textContent = buildingsData[2].name[currentLanguage];
        }

        // Atualize a função updateLanguage para chamar updateBuildingsLanguage
        const originalUpdateLanguage = updateLanguage;
        updateLanguage = function() {
            originalUpdateLanguage();
            updateBuildingsLanguage();
        }

        // Calcule o total das construções marcadas
        function getBuildingsTotals() {
            let totalIron = 0, totalBread = 0, totalGold = 0;
            document.querySelectorAll('.building-checkbox').forEach((checkbox, idx) => {
                if (checkbox.checked) {
                    totalIron += buildingsData[idx].iron;
                    totalBread += buildingsData[idx].bread;
                    totalGold += buildingsData[idx].gold;
                }
            });
            return { iron: totalIron, bread: totalBread, gold: totalGold };
        }

        // Atualize a função updateTotals para somar construções
        const originalUpdateTotals = updateTotals;
        updateTotals = function() {
            let totalValor = 0;
            let totalIron = 0;
            let totalBread = 0;
            let totalGold = 0;

            technologiesData.forEach((tech, index) => {
                const rowTotals = updateRowTotals(index);
                totalValor += rowTotals.valor;
                totalIron += rowTotals.iron;
                totalBread += rowTotals.bread;
                totalGold += rowTotals.gold;
            });

            // Adicione os custos das construções marcadas
            const buildingsTotals = getBuildingsTotals();
            totalIron += buildingsTotals.iron;
            totalBread += buildingsTotals.bread;
            totalGold += buildingsTotals.gold;

            document.getElementById('total-valor').textContent = totalValor.toLocaleString();
            document.getElementById('total-iron').textContent = totalIron.toLocaleString() + 'm';
            document.getElementById('total-bread').textContent = totalBread.toLocaleString() + 'm';
            document.getElementById('total-gold').textContent = totalGold.toLocaleString() + 'm';
        }

        // Adicione evento para checkboxes das construções
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.building-checkbox').forEach(cb => {
                cb.addEventListener('change', updateTotals);
            });
            updateBuildingsLanguage();
        });
    </script>
    <script data-goatcounter="https://waaarz.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
